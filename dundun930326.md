---
timezone: Asia/Shanghai
---

# dundun

1. 自我介绍
我是來自台灣的大三生，有過一些Solidity的基礎，想藉由這次的殘酷共學來推動自己學習更多以太坊底層的知識。
2. 你认为你会完成本次残酷学习吗？
會！
3. TG 联系方式：@dundun326
## Notes

<!-- Content_START -->

### 2025.02.06

今天是共學的第一天，主要的內容是著重在2024study group的week1，學習到了有關於一些以太坊的歷史和哲學心態的方面，沒想到居然和UNIX有關。
最重要的是這次終於了解圖靈完備是什麼意思了，簡單來說有圖靈完備就是可以跑所有圖靈機可以運行的工作，更白話就是可以做到所以有函數可以描述的工作，而以太坊具有圖靈完備性，可以運行智能合約，相較之下的bitcoin 網路就做不到。
晚點希望可以把影片看完，目前看到比較熟悉的密碼學了，另外好像可以跑一下上面code的test，應該滿有趣的。

### 2025.02.07
###節點
今天進一步瞭解「節點」的定義：在操作成面有執行層和共識層，一個客戶端可以去執行其中一項或是兩個都執行，那運行這個客戶端並且連上網路的電腦就會被叫做的節點(node)。
###測試
再來就是測試，一個成熟的應用一定需要經過大量的測試去確保他的安全性，在week1中有提到許多測試的工具可以做使用。
week1的最後總結了許多額外連結，有需要可以去看看。
也把week1的影片全部看完了。

### 2025.02.08
今天時間比較少，看了一下week2的影片，他蠻詳細的講解了共識層和執行層的邏輯，我覺得滿有趣的，希望晚一點可以有時間繼續。

### 2025.02.09
今天把week2影片看得差不多，但對於responsibility、p2p、snap還不太了解。可能需要去看一下文件。

### 2025.02.10
今天決定將重要的內容給GPT統整
### Modified Merkle-Patricia Trie (MPT) 

## **簡介**
**Modified Merkle-Patricia Trie (MPT)** 是以太坊使用的資料結構，用來儲存區塊鏈的 **狀態(state)**，也就是帳戶資訊、合約儲存（storage）等。它結合了 **Merkle Trie**（梅克爾樹）和 **Patricia Trie**（壓縮前綴樹）的特性，以提供 **高效的鍵值對查詢、插入、刪除，同時確保數據可驗證性**。

---

## **MPT 的三大核心特點**
1. **Merkle Tree 結構**
   - 讓狀態能夠被「加密摘要」保護，確保資料完整性。
   - 任何節點的改變都會影響到根雜湊（root hash），使區塊鏈能快速檢查篡改。

2. **Patricia Trie 結構**
   - 避免標準 Trie 結構的冗長性，透過 **壓縮前綴（path compression）** 優化空間使用。

3. **Modified（修改過的）特性**
   - 針對以太坊的應用，特別優化了存取效率，例如節點類型的設計（leaf node, extension node, branch node）。

---

## **MPT 在以太坊的應用**
以太坊主要有 **三種 MPT**，分別用來管理：
1. **世界狀態樹（State Trie）**
   - 錢包帳戶（externally owned account, EOA）
   - 智能合約帳戶
   - 每個帳戶的 balance、nonce、code hash、storage root

2. **儲存樹（Storage Trie）**
   - 智能合約的 storage 是一個單獨的 trie，每個合約都有自己的儲存樹。

3. **交易樹（Transaction Trie） & 收據樹（Receipt Trie）**
   - 存交易資訊與交易執行結果的收據。

---

## **MPT 的節點類型**
### 1️⃣ **Branch Node（分支節點）**
- 有 16 個子節點（對應 16 進制鍵的 0~F）。
- 有一個額外的值欄位，當鍵完整匹配時存儲數據。

### 2️⃣ **Leaf Node（葉節點）**
- 儲存完整鍵的 **剩餘部分（剩餘前綴）** 及對應值。
- 用於 **終端鍵值對（key-value）** 的存儲。

### 3️⃣ **Extension Node（擴展節點）**
- 儲存一段 **共享的鍵前綴**，避免冗餘。
- 指向下一個節點（可能是 Branch 或 Leaf）。

---

## **為什麼以太坊使用 MPT？**
✅ **節省空間**：Patricia Trie 壓縮了前綴，減少存儲需求。  
✅ **高效查詢**：Trie 結構允許 O(log(n)) 的鍵值查詢，適合區塊鏈高頻讀取需求。  
✅ **可驗證性**：Merkle Tree 讓資料完整性可被驗證，支援 **輕客戶端（Light Client）** 快速驗證區塊內容。  
✅ **資料不變性**：每次狀態改變時，新的 MPT 根哈希會改變，確保篡改可檢測。  

---

## **MPT 的缺點**
❌ **插入、刪除成本較高**：由於哈希運算，每次修改都需要更新樹的路徑。  
❌ **存儲效率問題**：節點是基於 RLP（Recursive Length Prefix）編碼，需要額外的存儲與解析成本。  
❌ **遍歷困難**：不像標準的鍵值存儲結構，不能高效遍歷所有鍵值。  

---
```json
{
  "cat": "meow",
  "dog": "bark",
  "cow": "moo"
}
```
這些鍵（key）會先轉換成十六進制表示：
```json
"cat" → 636174
"dog" → 646F67
"cow" → 636F77
```
MPT 會壓縮公共前綴來構建樹：
```json
Root
 ├── 63 (c)
 │   ├── 61 (a) → "meow"
 │   ├── 6F (o)
 │       ├── 77 (w) → "moo"
 ├── 64 (d) → 6F67 (og) → "bark"
```






<!-- Content_END -->
